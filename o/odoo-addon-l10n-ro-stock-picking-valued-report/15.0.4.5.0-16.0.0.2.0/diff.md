# Comparing `tmp/odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0-py3-none-any.whl.zip` & `tmp/odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 40081 bytes, number of entries: 23
--rw-r--r--  2.0 unx     3704 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/README.rst
--rw-r--r--  2.0 unx       21 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/__init__.py
--rw-r--r--  2.0 unx      733 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/__manifest__.py
--rw-r--r--  2.0 unx     4841 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/i18n/l10n_ro_stock_picking_valued_report.pot
--rw-r--r--  2.0 unx       58 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/models/__init__.py
--rw-r--r--  2.0 unx     7998 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_move_line.py
--rw-r--r--  2.0 unx     2325 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_picking.py
--rw-r--r--  2.0 unx      173 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       80 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      300 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/readme/INSTALL.rst
--rw-r--r--  2.0 unx     9301 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/report/stock_picking_report_valued.xml
--rw-r--r--  2.0 unx      566 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/icon.png
--rw-r--r--  2.0 unx    45999 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/icon.svg
--rw-r--r--  2.0 unx     4655 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/index.html
--rw-r--r--  2.0 unx      141 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/tests/__init__.py
--rw-r--r--  2.0 unx     3698 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/tests/common.py
--rw-r--r--  2.0 unx     1975 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_consum.py
--rw-r--r--  2.0 unx     7596 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_purchase_stock_picking_valued.py
--rw-r--r--  2.0 unx     3051 b- defN 24-Mar-17 08:05 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_sale_stock_picking_valued.py
--rw-r--r--  2.0 unx     4387 b- defN 24-Mar-17 08:06 odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-17 08:06 odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Mar-17 08:06 odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2922 b- defN 24-Mar-17 08:06 odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/RECORD
-23 files, 104621 bytes uncompressed, 34951 bytes compressed:  66.6%
+Zip file size: 40048 bytes, number of entries: 23
+-rw-r--r--  2.0 unx     3704 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/__init__.py
+-rw-r--r--  2.0 unx      733 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/__manifest__.py
+-rw-r--r--  2.0 unx     4841 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/i18n/l10n_ro_stock_picking_valued_report.pot
+-rw-r--r--  2.0 unx       58 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/models/__init__.py
+-rw-r--r--  2.0 unx     6999 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_move_line.py
+-rw-r--r--  2.0 unx     2325 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_picking.py
+-rw-r--r--  2.0 unx      173 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       80 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      300 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/readme/INSTALL.rst
+-rw-r--r--  2.0 unx     9301 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/report/stock_picking_report_valued.xml
+-rw-r--r--  2.0 unx      566 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/icon.png
+-rw-r--r--  2.0 unx    45999 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/icon.svg
+-rw-r--r--  2.0 unx     4655 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/index.html
+-rw-r--r--  2.0 unx      141 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/tests/__init__.py
+-rw-r--r--  2.0 unx     4312 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/tests/common.py
+-rw-r--r--  2.0 unx     1975 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_consum.py
+-rw-r--r--  2.0 unx     7354 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_purchase_stock_picking_valued.py
+-rw-r--r--  2.0 unx     3045 b- defN 24-Apr-03 17:02 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_sale_stock_picking_valued.py
+-rw-r--r--  2.0 unx     4388 b- defN 24-Apr-03 17:02 odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-03 17:02 odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-03 17:02 odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2922 b- defN 24-Apr-03 17:02 odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/RECORD
+23 files, 103989 bytes uncompressed, 34918 bytes compressed:  66.4%
```

## zipnote {}

```diff
@@ -51,20 +51,20 @@
 
 Filename: odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_purchase_stock_picking_valued.py
 Comment: 
 
 Filename: odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_sale_stock_picking_valued.py
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/METADATA
+Filename: odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/WHEEL
+Filename: odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/top_level.txt
+Filename: odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/RECORD
+Filename: odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_ro_stock_picking_valued_report/README.rst

```diff
@@ -3,31 +3,31 @@
 =====================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:44ea5ed2aca3795e4a21243fcde6a77d8d88b70b33f352ed424f2491a3097fcb
+   !! source digest: sha256:5034ff3779a21f88c7e0aaf60f03338d36f65595f31aa818122ed840b3c7cbd7
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
     :target: https://odoo-community.org/page/development-status
     :alt: Mature
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--romania-lightgray.png?logo=github
-    :target: https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_picking_valued_report
+    :target: https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_picking_valued_report
     :alt: OCA/l10n-romania
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/l10n-romania-15-0/l10n-romania-15-0-l10n_ro_stock_picking_valued_report
+    :target: https://translation.odoo-community.org/projects/l10n-romania-16-0/l10n-romania-16-0-l10n_ro_stock_picking_valued_report
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-romania&target_branch=15.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-romania&target_branch=16.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
 This module adds valued stock picking report according to Romanian Legislation.
 
 **Table of contents**
@@ -36,27 +36,27 @@
    :local:
 
 Installation
 ============
 
 To install this module, you need to:
 
-* clone the branch 15.0 of the repository https://github.com/OCA/l10n-romania
+* clone the branch 16.0 of the repository https://github.com/OCA/l10n-romania
 * add the path to this repository in your configuration (addons-path)
 * update the module list
 * search for "Romania - Stock Picking Valued Report" in your addons
 * install the module
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-romania/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_picking_valued_report%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_picking_valued_report%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -90,10 +90,10 @@
     :target: https://github.com/feketemihai
     :alt: feketemihai
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-feketemihai| 
 
-This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_picking_valued_report>`_ project on GitHub.
+This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_picking_valued_report>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/l10n_ro_stock_picking_valued_report/__manifest__.py

```diff
@@ -1,12 +1,12 @@
 # Copyright (C) 2022 NextERP Romania
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 {
     "name": "Romania - Stock Picking Valued Report",
-    "version": "15.0.4.5.0",
+    "version": "16.0.0.2.0",
     "category": "Localization",
     "summary": "Romania -  Stock Picking Valued Report",
     "author": "NextERP Romania," "Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/l10n-romania",
     "depends": [
         "l10n_ro_stock_account",
         "stock_landed_costs",
```

## odoo/addons/l10n_ro_stock_picking_valued_report/i18n/l10n_ro_stock_picking_valued_report.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* l10n_ro_stock_picking_valued_report
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
```

## odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_move_line.py

```diff
@@ -40,15 +40,15 @@
     l10n_ro_additional_charges = fields.Monetary(
         compute="_compute_l10n_ro_valued_fields",
         readonly=True,
         currency_field="l10n_ro_currency_id",
     )
 
     def _get_move_line_quantity(self):
-        return self.qty_done or self.product_qty
+        return self.qty_done or self.reserved_qty
 
     @api.depends(
         "l10n_ro_sale_line_id",
         "l10n_ro_purchase_line_id",
         "qty_done",
         "picking_id.state",
         "move_id",
@@ -79,14 +79,15 @@
                 line.l10n_ro_price_total = (
                     (sale_line.price_total / sale_line.product_uom_qty) * move_qty
                     if sale_line.product_uom_qty
                     else 0
                 )
             else:
                 svls = line.move_id.stock_valuation_layer_ids
+
                 svls_lc_not_same_invoice = self.env["stock.valuation.layer"]
                 price_unit = 0
                 if svls:
                     if svls[0].l10n_ro_valued_type == "internal_transfer":
                         svls = svls.filtered(lambda s: s.quantity > 0)
                     if svls[0].stock_move_id._is_in():
                         svls_lc_not_same_invoice = svls.filtered(
@@ -127,59 +128,33 @@
                         )
                     )
                 line.l10n_ro_price_total = (
                     line.l10n_ro_price_subtotal + line.l10n_ro_price_tax
                 )
 
     def _get_aggregated_product_quantities(self, **kwargs):
-        def get_aggregated_properties(move_line=False, move=False):
-            move = move or move_line.move_id
-            uom = move.product_uom or move_line.product_uom_id
-            name = move.product_id.display_name
-            description = move.description_picking
-            if description == name or description == move.product_id.name:
-                description = False
-            product = move.product_id
-            line_key = (
-                f'{product.id}_{product.display_name}_{description or ""}_{uom.id}'
-            )
-            return (line_key, name, description, uom)
+        agg_move_lines = super()._get_aggregated_product_quantities(**kwargs)
 
-        aggregated_move_lines = super()._get_aggregated_product_quantities(**kwargs)
-        for aggregated_move_line in aggregated_move_lines:
-            aggregated_move_lines[aggregated_move_line][
+        for aggregated_move_line in agg_move_lines:
+            agg_move_lines[aggregated_move_line][
                 "currency"
             ] = self.env.company.currency_id.id
-            aggregated_move_lines[aggregated_move_line]["l10n_ro_price_unit"] = 0
-            aggregated_move_lines[aggregated_move_line][
-                "l10n_ro_additional_charges"
-            ] = 0
-            aggregated_move_lines[aggregated_move_line][
-                "l10n_ro_additional_charges"
-            ] = 0
-            aggregated_move_lines[aggregated_move_line]["l10n_ro_price_subtotal"] = 0
-            aggregated_move_lines[aggregated_move_line]["l10n_ro_price_tax"] = 0
-            aggregated_move_lines[aggregated_move_line]["l10n_ro_price_total"] = 0
-
+            agg_move_lines[aggregated_move_line]["l10n_ro_price_unit"] = 0
+            agg_move_lines[aggregated_move_line]["l10n_ro_additional_charges"] = 0
+            agg_move_lines[aggregated_move_line]["l10n_ro_price_subtotal"] = 0
+            agg_move_lines[aggregated_move_line]["l10n_ro_price_tax"] = 0
+            agg_move_lines[aggregated_move_line]["l10n_ro_price_total"] = 0
         for move_line in self:
-            line_key, _name, _description, _uom = get_aggregated_properties(
+            aggregated_properties = move_line._get_aggregated_properties(
                 move_line=move_line
             )
-            aggregated_move_lines[line_key][
-                "l10n_ro_currency_id"
-            ] = move_line.l10n_ro_currency_id.id
-            aggregated_move_lines[line_key][
-                "l10n_ro_price_unit"
-            ] += move_line.l10n_ro_price_unit
-            aggregated_move_lines[line_key][
+            line_key = aggregated_properties["line_key"]
+            agg_line = agg_move_lines[line_key]
+            agg_line["l10n_ro_currency_id"] = move_line.l10n_ro_currency_id.id
+            agg_line["l10n_ro_price_unit"] += move_line.l10n_ro_price_unit
+            agg_line[
                 "l10n_ro_additional_charges"
             ] += move_line.l10n_ro_additional_charges
-            aggregated_move_lines[line_key][
-                "l10n_ro_price_subtotal"
-            ] += move_line.l10n_ro_price_subtotal
-            aggregated_move_lines[line_key][
-                "l10n_ro_price_tax"
-            ] += move_line.l10n_ro_price_tax
-            aggregated_move_lines[line_key][
-                "l10n_ro_price_total"
-            ] += move_line.l10n_ro_price_total
-        return aggregated_move_lines
+            agg_line["l10n_ro_price_subtotal"] += move_line.l10n_ro_price_subtotal
+            agg_line["l10n_ro_price_tax"] += move_line.l10n_ro_price_tax
+            agg_line["l10n_ro_price_total"] += move_line.l10n_ro_price_total
+        return agg_move_lines
```

## odoo/addons/l10n_ro_stock_picking_valued_report/readme/INSTALL.rst

```diff
@@ -1,7 +1,7 @@
 To install this module, you need to:
 
-* clone the branch 15.0 of the repository https://github.com/OCA/l10n-romania
+* clone the branch 16.0 of the repository https://github.com/OCA/l10n-romania
 * add the path to this repository in your configuration (addons-path)
 * update the module list
 * search for "Romania - Stock Picking Valued Report" in your addons
 * install the module
```

## odoo/addons/l10n_ro_stock_picking_valued_report/tests/common.py

```diff
@@ -1,10 +1,11 @@
 # Copyright (C) 2022 NextERP Romania
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
+from odoo import fields
 from odoo.tests import tagged
 
 from odoo.addons.l10n_ro_stock_account.tests.common import TestStockCommon
 
 
 @tagged("post_install", "-at_install")
 class TestStockPickingValued(TestStockCommon):
@@ -15,14 +16,32 @@
             chart_template_ref=ro_template_ref
         )
 
         cls.env.company.anglo_saxon_accounting = True
         cls.env.company.l10n_ro_accounting = True
         cls.env.company.l10n_ro_stock_acc_price_diff = True
         company = cls.env.user.company_id
+        # activare momenda RON si EUR
+        cls.currency_eur = cls.env.ref("base.EUR")
+        cls.currency_ron = cls.env.ref("base.RON")
+        cls.currency_eur.active = True
+
+        cls.currency_eur.rate_ids.create(
+            {
+                "name": "2021-01-01",
+                "rate": 4.5,
+                "company_id": cls.env.company.id,
+                "currency_id": cls.currency_ron.id,
+            }
+        )
+
+        # convertesc 1 EUR in RON
+        cls.rate = cls.currency_eur._convert(
+            1, cls.currency_ron, cls.env.company, fields.Date.today()
+        )
         cls.partner = cls.env["res.partner"].create({"name": "Mr. Odoo"})
         cls.sale_order = cls.env["sale.order"].create(
             {
                 "partner_id": cls.partner.id,
                 "order_line": [
                     (
                         0,
```

## odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_purchase_stock_picking_valued.py

```diff
@@ -4,21 +4,16 @@
 
 from .common import TestStockPickingValued
 
 
 @tagged("post_install", "-at_install")
 class TestPurchaseStockPickingValued(TestStockPickingValued):
     def _get_agg_lines_key(self, move_line):
-        name = move_line.product_id.display_name
-        description = move_line.move_id.description_picking
-        if description == name or description == move_line.product_id.name:
-            description = False
-        uom = move_line.product_uom_id
-        product = move_line.product_id
-        line_key = f'{product.id}_{product.display_name}_{description or ""}_{uom.id}'
+        agg_properties = move_line._get_aggregated_properties(move_line=move_line)
+        line_key = agg_properties["line_key"]
         return line_key
 
     def test_01_confirm_order(self):
         self.purchase_order.button_confirm()
         self.assertTrue(len(self.purchase_order.picking_ids))
         for picking in self.purchase_order.picking_ids:
             picking.action_assign()
@@ -56,59 +51,60 @@
         self.purchase_order2.company_id.tax_calculation_rounding_method = (
             "round_globally"
         )
         self.purchase_order2.button_confirm()
         self.assertTrue(len(self.purchase_order2.picking_ids))
         for picking in self.purchase_order2.picking_ids:
             picking.action_assign()
-            picking.move_line_ids.qty_done = 3.0
+            picking.move_ids.quantity_done = 3.0
             picking.button_validate()
             picking._action_done()
             self.assertEqual(picking.l10n_ro_amount_untaxed, 600.0)
             self.assertEqual(picking.l10n_ro_amount_tax, 114.0)
             self.assertEqual(picking.l10n_ro_amount_total, 714.0)
 
     def test_05_distinct_qty(self):
         self.purchase_order.button_confirm()
         self.assertTrue(len(self.purchase_order.picking_ids))
         for picking in self.purchase_order.picking_ids:
             picking.action_assign()
-            picking.move_line_ids.qty_done = 2.0
+            picking.move_ids.quantity_done = 2.0
             picking.button_validate()
             picking._action_done()
             self.assertEqual(picking.l10n_ro_amount_untaxed, 200.0)
             self.assertEqual(picking.l10n_ro_amount_tax, 38.0)
             self.assertEqual(picking.l10n_ro_amount_total, 238.0)
 
     def test_06_po_currency_qty(self):
         # In l10n_ro_stock_account we defined a currency rate of 4.5 for EUR
         self.purchase_order.currency_id = self.env.ref("base.EUR")
         self.purchase_order.button_confirm()
         self.assertTrue(len(self.purchase_order.picking_ids))
         for picking in self.purchase_order.picking_ids:
             picking.action_assign()
-            picking.move_line_ids.qty_done = 2.0
+            picking.move_ids.quantity_done = 2.0
             picking.button_validate()
             picking._action_done()
             self.assertEqual(picking.l10n_ro_amount_untaxed, 900.0)
             self.assertEqual(picking.l10n_ro_amount_tax, 171.0)
             self.assertEqual(picking.l10n_ro_amount_total, 1071.0)
 
         move_line = self.purchase_order.picking_ids.move_line_ids
         agg_lines = move_line._get_aggregated_product_quantities()
         line_key = self._get_agg_lines_key(move_line)
         exp = {
             "%s"
             % line_key: {
+                "line_key": line_key,
                 "name": move_line.product_id.name,
                 "description": False,
+                "product_uom": move_line.product_id.uom_id,
+                "move": move_line.move_id,
                 "qty_done": 2.0,
                 "qty_ordered": 2.0,
-                "product_uom": move_line.product_id.uom_id.name,
-                "product_uom_rec": move_line.product_id.uom_id,
                 "product": move_line.product_id,
                 "hs_code": False,
                 "currency": move_line.company_id.currency_id.id,
                 "l10n_ro_price_unit": 450.0,
                 "l10n_ro_additional_charges": 0.0,
                 "l10n_ro_price_subtotal": 900.0,
                 "l10n_ro_price_tax": 171.0,
@@ -123,15 +119,15 @@
         self.product_1.invoice_policy = "order"
 
         self.purchase_order.button_confirm()
 
         # proceseaza picking
         picking = self.purchase_order.picking_ids
         picking.action_assign()
-        picking.move_line_ids.qty_done = 1.0
+        picking.move_ids.quantity_done = 1.0
         picking.button_validate()
         picking._action_done()
 
         # adauga LC in factura
         self.purchase_order.action_create_invoice()
         invoice = self.purchase_order.invoice_ids
         invoice.invoice_date = self.purchase_order.date_approve
@@ -162,11 +158,10 @@
         invoice_lc2 = invoice_lc2_form.save()
         invoice_lc2.action_post()
         self.create_lc(self.purchase_order.picking_ids, 20, 0, vendor_bill=invoice_lc2)
 
         # verifica valori price_unit si additional_charges
         move_line = self.purchase_order.picking_ids.move_line_ids
         agg_lines = move_line._get_aggregated_product_quantities()
-
         line_key = self._get_agg_lines_key(move_line)
         self.assertEqual(agg_lines[line_key]["l10n_ro_price_unit"], 110.0)
         self.assertEqual(agg_lines[line_key]["l10n_ro_additional_charges"], 20.0)
```

## odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_sale_stock_picking_valued.py

```diff
@@ -32,35 +32,35 @@
 
     def test_03_tax_rounding_method(self):
         self.sale_order.company_id.tax_calculation_rounding_method = "round_globally"
         self.sale_order.action_confirm()
         self.assertTrue(len(self.sale_order.picking_ids))
         for picking in self.sale_order.picking_ids:
             picking.action_assign()
-            picking.move_lines.quantity_done = 1
+            picking.move_ids.quantity_done = 1
             picking.button_validate()
             self.assertEqual(picking.l10n_ro_amount_untaxed, 100.0)
             self.assertEqual(picking.l10n_ro_amount_tax, 19.0)
             self.assertEqual(picking.l10n_ro_amount_total, 119.0)
 
     def test_04_lines_distinct_tax(self):
         self.sale_order2.company_id.tax_calculation_rounding_method = "round_globally"
         self.sale_order2.action_confirm()
         self.assertTrue(len(self.sale_order2.picking_ids))
         for picking in self.sale_order2.picking_ids:
             picking.action_assign()
-            picking.move_lines.quantity_done = 1
+            picking.move_ids.quantity_done = 1
             picking.button_validate()
             self.assertEqual(picking.l10n_ro_amount_untaxed, 200.0)
             self.assertEqual(picking.l10n_ro_amount_tax, 38.0)
             self.assertEqual(picking.l10n_ro_amount_total, 238.0)
 
     def test_05_distinct_qty(self):
         self.sale_order.action_confirm()
         self.assertTrue(len(self.sale_order.picking_ids))
         for picking in self.sale_order.picking_ids:
             picking.action_assign()
-            picking.move_lines.quantity_done = 2.0
+            picking.move_ids.quantity_done = 2.0
             picking.button_validate()
             self.assertEqual(picking.l10n_ro_amount_untaxed, 200.0)
             self.assertEqual(picking.l10n_ro_amount_tax, 38.0)
             self.assertEqual(picking.l10n_ro_amount_total, 238.0)
```

## Comparing `odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/METADATA` & `odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,51 +1,51 @@
 Metadata-Version: 2.1
 Name: odoo-addon-l10n-ro-stock-picking-valued-report
-Version: 15.0.4.5.0
+Version: 16.0.0.2.0
 Summary: Romania - Stock Picking Valued Report
 Home-page: https://github.com/OCA/l10n-romania
 Author: NextERP Romania,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Classifier: Development Status :: 6 - Mature
-Requires-Python: >=3.8
-Requires-Dist: odoo-addon-l10n-ro-stock-account <15.1dev,>=15.0dev
-Requires-Dist: odoo <15.1dev,>=15.0a
+Requires-Python: >=3.10
+Requires-Dist: odoo-addon-l10n-ro-stock-account <16.1dev,>=16.0dev
+Requires-Dist: odoo <16.1dev,>=16.0a
 
 =====================================
 Romania - Stock Picking Valued Report
 =====================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:44ea5ed2aca3795e4a21243fcde6a77d8d88b70b33f352ed424f2491a3097fcb
+   !! source digest: sha256:5034ff3779a21f88c7e0aaf60f03338d36f65595f31aa818122ed840b3c7cbd7
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Mature-brightgreen.png
     :target: https://odoo-community.org/page/development-status
     :alt: Mature
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--romania-lightgray.png?logo=github
-    :target: https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_picking_valued_report
+    :target: https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_picking_valued_report
     :alt: OCA/l10n-romania
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/l10n-romania-15-0/l10n-romania-15-0-l10n_ro_stock_picking_valued_report
+    :target: https://translation.odoo-community.org/projects/l10n-romania-16-0/l10n-romania-16-0-l10n_ro_stock_picking_valued_report
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-romania&target_branch=15.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-romania&target_branch=16.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
 This module adds valued stock picking report according to Romanian Legislation.
 
 **Table of contents**
@@ -54,27 +54,27 @@
    :local:
 
 Installation
 ============
 
 To install this module, you need to:
 
-* clone the branch 15.0 of the repository https://github.com/OCA/l10n-romania
+* clone the branch 16.0 of the repository https://github.com/OCA/l10n-romania
 * add the path to this repository in your configuration (addons-path)
 * update the module list
 * search for "Romania - Stock Picking Valued Report" in your addons
 * install the module
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-romania/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_picking_valued_report%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/l10n-romania/issues/new?body=module:%20l10n_ro_stock_picking_valued_report%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -108,12 +108,12 @@
     :target: https://github.com/feketemihai
     :alt: feketemihai
 
 Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-feketemihai| 
 
-This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/15.0/l10n_ro_stock_picking_valued_report>`_ project on GitHub.
+This module is part of the `OCA/l10n-romania <https://github.com/OCA/l10n-romania/tree/16.0/l10n_ro_stock_picking_valued_report>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/RECORD` & `odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,23 +1,23 @@
-odoo/addons/l10n_ro_stock_picking_valued_report/README.rst,sha256=tAixjgvBSyI-BQ6-SRxkprL0dARjsc6ZMN1hBES7rzM,3704
+odoo/addons/l10n_ro_stock_picking_valued_report/README.rst,sha256=C1vphp3ZxCL7cHwwr8C8sHpRg6p0VfcmvKmsL2EVqUY,3704
 odoo/addons/l10n_ro_stock_picking_valued_report/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/l10n_ro_stock_picking_valued_report/__manifest__.py,sha256=0nUYzNgdTjotcNIKhy6BpnKJnVco2sf07dLRp8FiXkM,733
-odoo/addons/l10n_ro_stock_picking_valued_report/i18n/l10n_ro_stock_picking_valued_report.pot,sha256=0fMuLN7Fngi_6QW-keAxMnB0QqnOLTv3tqxj7UtuYTY,4841
+odoo/addons/l10n_ro_stock_picking_valued_report/__manifest__.py,sha256=k0aKHz2duzpxUJtU6RJ5HXHpUBZhAZZq7Py9I2k-GQU,733
+odoo/addons/l10n_ro_stock_picking_valued_report/i18n/l10n_ro_stock_picking_valued_report.pot,sha256=gm4LPkQAp2ngsK6gSqk4cHRh_zL_upC0qoougjC-cU4,4841
 odoo/addons/l10n_ro_stock_picking_valued_report/models/__init__.py,sha256=uQn4ge4k8rb6FJ6_JVr2mCQrwuXtkiTTfssVUF458uI,58
-odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_move_line.py,sha256=Lq89aLPpvuJChMdvvENJMcaM58aRjkvWEITqOmPXBtc,7998
+odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_move_line.py,sha256=tSC0mMfpDy-jw2OZXunI7keLeWC4dEvcszPlALQ0luA,6999
 odoo/addons/l10n_ro_stock_picking_valued_report/models/stock_picking.py,sha256=H9hpRBge3kjqjfD9bdPT4-sHBf2g5O4OkX9vrKf2dKk,2325
 odoo/addons/l10n_ro_stock_picking_valued_report/readme/CONTRIBUTORS.rst,sha256=dNi9MtPyI4HYGgmDlgXb-Co0S_XtqQ3Mn1khyHznYZg,173
 odoo/addons/l10n_ro_stock_picking_valued_report/readme/DESCRIPTION.rst,sha256=RGNBFNt2oMeCMH-lLLx1TteYbZuzLbNVW-KtH834ZM0,80
-odoo/addons/l10n_ro_stock_picking_valued_report/readme/INSTALL.rst,sha256=an8BNBMpR-czisLR9UP2C88Nhqrt33BRiSVFu0iMoSg,300
+odoo/addons/l10n_ro_stock_picking_valued_report/readme/INSTALL.rst,sha256=QmfAqxc1fUScENQwhuEYHZpWfRodqNbx3K351yxcOrM,300
 odoo/addons/l10n_ro_stock_picking_valued_report/report/stock_picking_report_valued.xml,sha256=M2nagfGA8DXrj5XJ06cZCFZF6IXoKMKfozrrpyiW0gk,9301
 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/icon.png,sha256=MND3TYqrnM623pd0tf3WhoHU-3X5Ns6ho-Yz_HcYlTk,566
 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/icon.svg,sha256=diKhOMF5l92KAWYh0Ei8TCDq2cJnMT7UPvFPIqVPFVU,45999
 odoo/addons/l10n_ro_stock_picking_valued_report/static/description/index.html,sha256=D5WG-OqsNDjzEuurtfAU9Lfs8gv7Lq3dVDs3fHr_OZg,4655
 odoo/addons/l10n_ro_stock_picking_valued_report/tests/__init__.py,sha256=2pPTY7gHp8ahvpkN3Hz1tJXTBdF1PWs2a7wrYYjiaAc,141
-odoo/addons/l10n_ro_stock_picking_valued_report/tests/common.py,sha256=v83uw6KJK3MyxYogeEy7ALjRlv0K0n68a7TQifOOD3I,3698
+odoo/addons/l10n_ro_stock_picking_valued_report/tests/common.py,sha256=xXTqRzuvrLUGd0xCVAAAM9nsu0xR8sab6Nw-PPauG2M,4312
 odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_consum.py,sha256=C8MtCL88TWSLL528MCqXLAae-vGK617GvFS3vLk4gzg,1975
-odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_purchase_stock_picking_valued.py,sha256=Bf6u5AebQydNmEyBYrZgGAPDMaCO8YUsMUKDKTmO8bk,7596
-odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_sale_stock_picking_valued.py,sha256=bmKsN2AVkusCEPd76UJYSotIYlg38Gv2-NVaSR9Ujkw,3051
-odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/METADATA,sha256=EOd4V6iYUMEuauf6gfn-UlpU2z2kplcP4oYeyy3mfx8,4387
-odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_l10n_ro_stock_picking_valued_report-15.0.4.5.0.dist-info/RECORD,,
+odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_purchase_stock_picking_valued.py,sha256=BGHvSgqfQ-TTFz6flKhGLrfEwPFGHT6y_f7FHn_MhJM,7354
+odoo/addons/l10n_ro_stock_picking_valued_report/tests/test_sale_stock_picking_valued.py,sha256=OI9yNKoF4eowYvNKXS-PnoeUQtdMRV6T_ReXekJG8TE,3045
+odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/METADATA,sha256=9V3QasDI1Qw3Ot7knAD_Uo9T38W_SB93l2pu_fliVsA,4388
+odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_l10n_ro_stock_picking_valued_report-16.0.0.2.0.dist-info/RECORD,,
```

