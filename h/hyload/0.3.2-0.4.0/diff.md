# Comparing `tmp/hyload-0.3.2-py3-none-any.whl.zip` & `tmp/hyload-0.4.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,19 +1,18 @@
-Zip file size: 27091 bytes, number of entries: 17
--rw-rw-rw-  2.0 fat      586 b- defN 24-Feb-15 04:45 hyload/__init__.py
--rw-rw-rw-  2.0 fat       17 b- defN 24-Feb-15 04:52 hyload/cfg.py
--rw-rw-rw-  2.0 fat    41080 b- defN 24-Feb-15 04:44 hyload/httpclient.py
--rw-rw-rw-  2.0 fat     2591 b- defN 24-Feb-15 04:45 hyload/logger.py
--rw-rw-rw-  2.0 fat    12380 b- defN 24-Feb-15 04:47 hyload/stats.py
--rw-rw-rw-  2.0 fat      979 b- defN 24-Jan-20 03:36 hyload/util.py
--rw-rw-rw-  2.0 fat        0 b- defN 23-Jul-08 14:54 hyload/tools/__init__.py
--rw-rw-rw-  2.0 fat     3557 b- defN 24-Feb-15 04:47 hyload/tools/plotperf.py
--rw-rw-rw-  2.0 fat     2571 b- defN 24-Feb-15 04:48 hyload/tools/plotresource.py
--rw-rw-rw-  2.0 fat    39521 b- defN 23-Jul-08 14:54 hyload/tools/puttyagents.py
--rw-rw-rw-  2.0 fat     3938 b- defN 24-Feb-15 04:50 hyload/tools/remoteop.py
--rw-rw-rw-  2.0 fat     7493 b- defN 23-Jul-14 12:12 hyload/tools/statshub.py
--rw-rw-rw-  2.0 fat     1084 b- defN 24-Feb-15 04:53 hyload-0.3.2.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1997 b- defN 24-Feb-15 04:53 hyload-0.3.2.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 24-Feb-15 04:53 hyload-0.3.2.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        7 b- defN 24-Feb-15 04:53 hyload-0.3.2.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1307 b- defN 24-Feb-15 04:53 hyload-0.3.2.dist-info/RECORD
-17 files, 119200 bytes uncompressed, 24975 bytes compressed:  79.0%
+Zip file size: 20727 bytes, number of entries: 16
+-rw-rw-rw-  2.0 fat      648 b- defN 24-Apr-03 04:25 hyload/__init__.py
+-rw-rw-rw-  2.0 fat       17 b- defN 24-Apr-03 04:30 hyload/cfg.py
+-rw-rw-rw-  2.0 fat    43297 b- defN 24-Apr-03 04:26 hyload/httpclient.py
+-rw-rw-rw-  2.0 fat     2591 b- defN 24-Mar-18 03:21 hyload/logger.py
+-rw-rw-rw-  2.0 fat    12380 b- defN 24-Mar-18 03:21 hyload/stats.py
+-rw-rw-rw-  2.0 fat      979 b- defN 24-Mar-18 03:21 hyload/util.py
+-rw-rw-rw-  2.0 fat        0 b- defN 24-Mar-18 03:21 hyload/tools/__init__.py
+-rw-rw-rw-  2.0 fat     3557 b- defN 24-Mar-18 02:54 hyload/tools/plotperf.py
+-rw-rw-rw-  2.0 fat     2571 b- defN 24-Mar-18 03:21 hyload/tools/plotresource.py
+-rw-rw-rw-  2.0 fat     3938 b- defN 24-Mar-18 03:21 hyload/tools/remoteop.py
+-rw-rw-rw-  2.0 fat     7493 b- defN 24-Mar-18 03:21 hyload/tools/statshub.py
+-rw-rw-rw-  2.0 fat     1084 b- defN 24-Apr-03 05:05 hyload-0.4.0.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1997 b- defN 24-Apr-03 05:05 hyload-0.4.0.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 24-Apr-03 05:05 hyload-0.4.0.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        7 b- defN 24-Apr-03 05:05 hyload-0.4.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1222 b- defN 24-Apr-03 05:05 hyload-0.4.0.dist-info/RECORD
+16 files, 81873 bytes uncompressed, 18741 bytes compressed:  77.1%
```

## zipnote {}

```diff
@@ -21,32 +21,29 @@
 
 Filename: hyload/tools/plotperf.py
 Comment: 
 
 Filename: hyload/tools/plotresource.py
 Comment: 
 
-Filename: hyload/tools/puttyagents.py
-Comment: 
-
 Filename: hyload/tools/remoteop.py
 Comment: 
 
 Filename: hyload/tools/statshub.py
 Comment: 
 
-Filename: hyload-0.3.2.dist-info/LICENSE
+Filename: hyload-0.4.0.dist-info/LICENSE
 Comment: 
 
-Filename: hyload-0.3.2.dist-info/METADATA
+Filename: hyload-0.4.0.dist-info/METADATA
 Comment: 
 
-Filename: hyload-0.3.2.dist-info/WHEEL
+Filename: hyload-0.4.0.dist-info/WHEEL
 Comment: 
 
-Filename: hyload-0.3.2.dist-info/top_level.txt
+Filename: hyload-0.4.0.dist-info/top_level.txt
 Comment: 
 
-Filename: hyload-0.3.2.dist-info/RECORD
+Filename: hyload-0.4.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## hyload/__init__.py

```diff
@@ -1,17 +1,17 @@
 from gevent import monkey,spawn,sleep, wait
 monkey.patch_all()
 from hyload.stats import Stats
 from hyload.logger import TestLogger
-from hyload.httpclient import HttpClient
+from hyload.httpclient import HttpClient, create_ct_body_for_uploading
 
 
 __all__ = [
     'sleep', 'Stats', 'TestLogger', 'HttpClient',
-    'run_task', 'wait_for_tasks_done'
+    'run_task', 'wait_for_tasks_done', 'create_ct_body_for_uploading'
 ]
 
 
 _task_list =[]
 
 def run_task(target, *args, **kwargs):
     global _task_list
```

## hyload/cfg.py

```diff
@@ -1 +1 @@
-Version = '0.3.2'
+Version = '0.4.0'
```

## hyload/httpclient.py

```diff
@@ -39,14 +39,93 @@
 def _guessEncodingFromContentType(contentType):
     if contentType is not None:
         for one in contentType.replace(' ','').split(';'):
             if one.startswith('charset='):
                 return one[8:]
     return 'utf-8'
 
+
+def create_ct_body_for_uploading(file_path:str, other_form_data=None):
+    """helper function to compose a request of uploading file
+
+    call it like :
+
+    header_ct, body = create_ct_body_for_uploading('d:/video1.mp4', [
+            {'params':'name="token"',  'value':'sdfsdfsdf' },
+            {'params':'name="token2"', 'value':'sdf2sdf2sdf' },
+        ])
+
+    response = client.post(
+        'http://127.0.0.1/upload',        
+        headers={
+            'Content-Type': header_ct
+        },
+        data=body,
+    )
+
+
+    Parameters
+    ----------
+    file_path : str
+        the path of the file to upload, like 'd:/video1.mp4'
+
+    other_form_data : list|None, optional
+        the other form data in post body, like 
+        [
+            {'params':'name="token"',  'value':'sdfsdfsdf' },
+            {'params':'name="token2"', 'value':'sdf2sdf2sdf' },
+        ]
+
+    Returns
+    -------
+    _type_
+        _description_
+    """
+    boundary = '----WebKitFormBoundaryNY3JQwicpzfPD9ra'
+    header_ct = f'multipart/form-data; boundary={boundary}' # Content-Type
+
+
+    boundary = boundary.encode()
+    BNL = b'\r\n'
+    BOUNDARY_LINE = b'--' + boundary + BNL
+    BOUNDARY_LINE_END   = b'--' + boundary + b'--' + BNL + BNL
+    import mimetypes,os
+    fileName = os.path.basename(file_path)
+
+    body = b''
+    
+    # **** file content part
+    body += BOUNDARY_LINE
+    body += f'Content-Disposition: form-data; name="file"; filename={fileName}'.encode() + BNL
+    fileType = mimetypes.guess_type(fileName)[0] or 'application/octet-stream'
+    body += f'Content-Type: {fileType}'.encode() + BNL  + BNL
+
+    with open(file_path,'rb') as f: 
+        # Bad for large files
+        body +=  f.read()
+
+    body += BNL
+
+    # **** other entries
+    if other_form_data is not None:
+        for entry in other_form_data:
+            body += BOUNDARY_LINE
+
+            params = entry['params']
+            value = entry['value']
+
+            body += BNL + f'Content-Disposition: form-data; {params}'.encode() + BNL + BNL
+            body += value.encode() + BNL
+
+    # **** end
+    body += BOUNDARY_LINE_END
+
+    return header_ct, body
+
+
 # HTTPResponse Wrapper obj
 # refer to https://docs.python.org/3/library/http.client.html#httpresponse-objects
 class HttpResponse():
     def __init__(self,
                  http_response=None,
                  raw_body=None,
                  response_time=None, # in ms
```

## Comparing `hyload-0.3.2.dist-info/LICENSE` & `hyload-0.4.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `hyload-0.3.2.dist-info/METADATA` & `hyload-0.4.0.dist-info/METADATA`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: hyload
-Version: 0.3.2
+Version: 0.4.0
 Summary: load testing library
 Home-page: https://jcyrss.github.io/hyload
 Download-URL: https://pypi.python.org/pypi/hyload
 Author: byhy
 Author-email: jcyrss@gmail.com
 License: MIT
 Keywords: hyload loadtesting
```

## Comparing `hyload-0.3.2.dist-info/RECORD` & `hyload-0.4.0.dist-info/RECORD`

 * *Files 26% similar despite different names*

```diff
@@ -1,17 +1,16 @@
-hyload/__init__.py,sha256=FqM0Ha_cwvpdjWbEP7FhxEVa_tL65G8uahkWM9HFkss,586
-hyload/cfg.py,sha256=U7lbLzFnYuvfFSIW5vnXodt5ueVdrHWlD1mrpNvFP-Y,17
-hyload/httpclient.py,sha256=hNtug0-RT_V4BMXb0vbSwMxouSStxSONvhy4ffMGRQo,41080
+hyload/__init__.py,sha256=j1BjTWW74TIRnmpMxjTZQgnyYRkmqI3ABOkn6IToBv4,648
+hyload/cfg.py,sha256=glLChdsnEEzoZUOzGho5KK2GNTlvTukK4K1L8U5iEhY,17
+hyload/httpclient.py,sha256=Xm2kCaaLPUqETiN5zIxLlYRs0q6pzUsSW34br_Tivis,43297
 hyload/logger.py,sha256=OEYo4GMYSrY4K7GDj-gQ3F0fWZgYj6PVYYpWhKgh3WM,2591
 hyload/stats.py,sha256=IQbScm7V9-k-oY5X65FGMUxgMP0xOFkYKsIiouwgcTo,12380
 hyload/util.py,sha256=lNKVVW4vYFueXcvOC4HoIMIiXFUz6skR9shSA7iPsWU,979
 hyload/tools/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 hyload/tools/plotperf.py,sha256=lJYbvaDwQcPPzEO2w_gkMWBOX4XexApuTtCz5no9cX8,3557
 hyload/tools/plotresource.py,sha256=M86lrQZWontu_-EzA8uWwJvZNwCc5h0gxmiicEKWnLo,2571
-hyload/tools/puttyagents.py,sha256=NvL3VhYYka69kh7QTdRzjm7dLN3dB5MuU__K1GmGsW8,39521
 hyload/tools/remoteop.py,sha256=oqJMqomEDghxZIC1xzzVGDCfmiHHLJKcjJM92VCNrMs,3938
 hyload/tools/statshub.py,sha256=bPyj9h6eewxRJSJmQpqtkx3DFbvoYbQsWpcFvATFang,7493
-hyload-0.3.2.dist-info/LICENSE,sha256=INbY9R__BClfj0KJjHQXjaaC0q_nW1V4YvzLoITHiVo,1084
-hyload-0.3.2.dist-info/METADATA,sha256=40ix2loWbnaBw3qdpPPyG0MkqoCkoZpO-TXsODPSTo4,1997
-hyload-0.3.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-hyload-0.3.2.dist-info/top_level.txt,sha256=ivEyc-v2p5WU0itBl-u9QARFubEqBlHfczIhYbuD_U8,7
-hyload-0.3.2.dist-info/RECORD,,
+hyload-0.4.0.dist-info/LICENSE,sha256=INbY9R__BClfj0KJjHQXjaaC0q_nW1V4YvzLoITHiVo,1084
+hyload-0.4.0.dist-info/METADATA,sha256=OgrHFciYj-hRcsAzoJtvttsaksCNURbo6KKOBtGRhF8,1997
+hyload-0.4.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+hyload-0.4.0.dist-info/top_level.txt,sha256=ivEyc-v2p5WU0itBl-u9QARFubEqBlHfczIhYbuD_U8,7
+hyload-0.4.0.dist-info/RECORD,,
```

